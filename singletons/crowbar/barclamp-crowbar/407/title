change uses of throw to raise
