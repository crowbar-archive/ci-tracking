refactor_machine_controller
